<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Redirecting...</title>
  <script>
    // GitHub Pages SPA 重定向脚本
    // 将 404 请求重定向到 index.html，同时保留路径信息
    (function() {
      var pathSegmentsToKeep = 1; // 保留 basePath 段数（如 /quicksilver）
      
      var l = window.location;
      var repo = l.pathname.split('/')[1] || '';
      
      // 检查是否有 basePath
      var basePath = '';
      if (repo && repo !== 'index.html') {
        basePath = '/' + repo;
        pathSegmentsToKeep = 1;
      } else {
        pathSegmentsToKeep = 0;
      }
      
      // 构建重定向 URL
      // 将路径信息编码到查询参数中，让 index.html 处理
      var redirectPath = l.pathname.slice(1).split('/').slice(pathSegmentsToKeep).join('/');
      var redirectUrl = l.protocol + '//' + l.hostname + (l.port ? ':' + l.port : '') + 
        basePath + '/?p=/' + redirectPath + 
        (l.search ? '&q=' + l.search.slice(1).replace(/&/g, '~and~') : '') +
        l.hash;
      
      l.replace(redirectUrl);
    })();
  </script>
</head>
<body>
  <p>Redirecting...</p>
</body>
</html>
